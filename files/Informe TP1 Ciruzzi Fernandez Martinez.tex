\documentclass[a4paper,10pt]{article}

\usepackage{graphicx}
\usepackage[ansinew]{inputenc}
\usepackage[spanish]{babel}
\usepackage{listings} 
\usepackage{tabto}
\usepackage{float}
\usepackage[justification=centering]{caption}
\usepackage[T1]{fontenc}


\title{		\textbf{Trabajo práctico \#1: conjunto de instrucciones MIPS}}

\author{	Santiago Fernandez, \textit{Padrón Nro. 94.489}                     \\
            \texttt{ fernandezsantid@gmail.com }                                              \\[2.5ex]
            Pablo Rodrigo Ciruzzi, \textit{Padrón Nro. 95.748}                     \\
            \texttt{ p.ciruzzi@hotmail.com }                                              \\[2.5ex]
            Horacio Martinez, \textit{Padrón Nro. }                     \\
            \texttt{ hmk142@hotmail.com }                                              \\[2.5ex]
            \normalsize{2do. Cuatrimestre de 2015}                                      \\
            \normalsize{66.20 Organización de Computadoras  $-$ Práctica Jueves}  \\
            \normalsize{Facultad de Ingeniería, Universidad de Buenos Aires}            \\
            \\
            \\
       }
\date{ 24 de Septiembre, 2015}

\begin{document}

\maketitle
\thispagestyle{empty}   % quita el número en la primer página


\begin{abstract}
Este trabajo práctico trata de una versión en lenguaje C, de un programa que computa autómatas celulares para reglas y estados iniciales arbitrarios. Además, se hizo un version en Assembly de una función para familiarizarse con el conjunto de instrucciones MIPS32 y el concepto de ABI.
\end{abstract}
\pagebreak 

\tableofcontents
\pagebreak

\section{Introducción}

\section{Desarrollo}

\subsection{Recursos y Portabilidad}

Uno de los objetivos del trabajo práctico es poder probar la portabilidad del
programa en diferentes entornos. En el enunciado se pedía que el programa se pudiera ejecutar en NetBSD[4]/pmax (usando el simulador GXemul[5]) y en la versión
de Linux (Knoppix, RedHat, Debian, Ubuntu) usada para correr el simulador,
Linux/i386. En particular, se lo probó en Ubuntu 14.04. En GXemul se corrió una máquina de arquitectura MIPS cuyo sistema operativo era una versión reciente de NetBSD/pmax. La transferencia de archivos entre la máquina host y la guest se hizo mediante \textit{SSH}. Se procedió de la siguiente manera:

Para trabajar con el GXemul se procedió primero creando una nueva interfaz de red (debe crearse cada vez que se inicia el \textit{host} y con permisos de administrador):
\\

\emph{hostOS\$ sudo ifconfig lo:0 172.20.0.1}
\\

Luego se ejecutó el GXemul en modo X:
\\

\emph{hostOS\$ ./xgxemul -e 3max -d netbsd-pmax.img -x}
\\

Una vez ya ingresado con el usuario y la contraseña en la máquina simulada,
se creó un túnel reverso para saltear las limitaciones propias del GXemul:
\\

\emph{guestOS\$ ssh -R 2222:127.0.0.1:22 usuario@172.20.0.1}
\\

A partir de ese momento y dejando lo anterior en segundo plano, ya se puedo
trabajar mediante SSH de manera más cómoda:
\\

\emph{hostOS\$ ssh -p 2222 root@127.0.0.1}
\\

\subsection{Implementación}


\subsection{Compilación}

Para compilar el trabajo práctico, realizamos un Makefile para hacer mas sencilla esta tarea.\\
\\
\par Para compilar para C:
\emph{make c}\\

Para compilar para MIPS:
\emph{make mips}\\

Finalmente para limpiar los archivos:
\emph{make clean}\\

\subsection{Corrida de Pruebas}
Teniendo en cuenta un archivo inicial de 80 caracteres de que tiene el siguiente formato: \\
\emph{\$ cat inicial \\
00000000000000000000000000000000000000010000000000000000000000000000000000000000 \\}
Se hicieron las siguientes pruebas:
\begin{itemize}
\NumTabs{4}
	\item Como primer medida ejecutamos el comando -h para ver la ayuda: \\
		\emph{\$ autcel -h \\
			Uso: \\
			autcel -h \\
			autcel -V \\
			autcel R N inputfile [-o outputprefix] \\
			 \\
			Opciones: \\
			\tab{-h, --help}
			\tab{Imprime este mensaje.} \\
			\tab{-V, --version}
			\tab{Da la version del programa.} \\
			\tab{-o}
			\tab{Prefijo de los archivos de salida.} \\
			 \\
			Ejemplo: \\
			autcel 30 80 inicial -o evolucion \\
			Calcula la evolucion del automata "Regla 30", en un mundo unidimensional de 80 celdas, por 80 iteraciones. \\
			El archivo de salida se llamara evolucion.pbm. \\
			Si no se da un prefijo para los archivos de salida, el prefijo sera el nombre del archivo de entrada.
		}
	\item Y luego el comando -V para ver la version: \\
		\emph{\$ autcel -V \\
			autcel: version 1.0
		}
	\item Primero probamos sin enviar ningun tipo de parametro: \\
		\emph{\$ autcel \\
			El comando ejecutado no respeta la sintaxis. Para mas ayuda ejecutar el programa con -h o --help.
		}
	\item 
	\ldots
\end{itemize}

\subsection{Código}
\subsubsection{Código en C}

\begin{lstlisting}[language=C, columns=flexible, breaklines=true, frame=single, title=Listing : src/main.c]

\end{lstlisting}

\pagebreak

\section{Diagrama de Stack}
\subsection{Proximo}
 Stack Size Proximo  24
\begin{table}[h]
\begin{tabular}{|l|l|} \hline
 A4&  40  \\ \hline
 A3&  36  \\ \hline
 A2&  32  \\ \hline
 A1&  28  \\ \hline
 A0&  24  \\ \hline
 FP&  20  \\ \hline
 GP&  16  \\ \hline
 POSICION&  12  \\ \hline
 ACTUAL&  8  \\ \hline
 DERECHA&  4  \\	\hline
 IZQUIERDA&  0  \\ \hline
\end{tabular}
\end{table} \\

\newpage

\section{Conclusiones}

\par De este trabajo practico se pudo aprender como programar con el conjunto de instrucciones Assembly de MIPS32, asi como tambien la utilizacion correcta de la ABI de la catedra, entendiendo de esta manera como funciona una computadora a bajo nivel.

\newpage
\section{Referencias}
\noindent[1] GXemul, http://gavare.se/gxemul/.\\ \relax
[2] The NetBSD project, http://www.netbsd.org/.\\ \relax
[3] System V application binary interface, MIPS RISC processor supplement(third edition). Santa Cruz Operations, Inc.\\ \relax
[4] func call conv.pdf, en el area de Material de los archivos del grupo de Yahoo.\\ \relax

\end{document}
